<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
    <link rel="icon" type="image/x-icon" href="assets/images/logo.jpg">
    <link rel="stylesheet" href="assets/style.css">
</head>

<body>
    <!-- Navbar -->
    <section class="header_menu" id="header_menu">
        <div class="container-fluid px-0 shadow">
            <nav class="navbar navbar-expand-lg navbar-light bg-light py-3">
                <a class="navbar-brand pl-5 pl-small-0" href="index.html">
                    <img src="assets/images/logo.jpg" class="img img-fluid" width="120px" alt="logo">
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse"
                    data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                    aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav mx-auto">
                        <li class="nav-item active">
                            <a class="nav-link" href="index.html">Home <span class="sr-only">(current)</span></a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="product.html">Product</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="Category.html">Category</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="about.html">About Us</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="contact.html">Contact Us</a>
                        </li>
                    </ul>
                    <div class="search mr-3">
                        <a href="search.html" class="btn btn-sm btn-outline-primary">Search</a>
                    </div>
                    <div class="cart">
                        <a href="cart.html">
                            <i class="fas fa-shopping-cart fa-2x"></i>
                            <span class="badge badge-pill badge-primary" id="cart-count">0</span>
                        </a>
                    </div>
                </div>
            </nav>
        </div>
    </section>

    <!-- Cart -->
    <section class="cart py-5 my-5 " id="cart">
        <div class="container">
            <div class="container text-center" style="padding-bottom: 30px;">
                <h1 class="fs-1">Cart</h1>
            </div>
            <div class="row">
                <!-- Products Column -->
                <div class="col-md-8 container">
                    <div id="cart-items"></div>
                </div>
                <!-- Checkout Column -->
                <div class="col-md-4 container">
                    <h4>Checkout</h4>
                    <div id="cart-total" class="mb-3">
                        <h4>Total: ₹0</h4>
                        <p id="shipment-charges">Shipment Charges: ₹0</p>
                        <p id="discount">Discount:0%</p>
                        <p id="saved-money">You Saved:0</p>
                        <hr>
                        <h4 id="final-total">Final Total: ₹0</h4>
                    </div>
                  <button class="btn btn-primary btn-lg btn-block" onclick="proceedToCheckout()">Proceed to Checkout</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer mt-5 py-4 bg-light">
        <div class="container">
            <div class="row">
                <!-- Company Info -->
                <div class="col-md-4">
                    <div class="footer-logo">
                        <img src="assets/images/logo.png" alt="Company Logo" class="img-fluid mb-3" width="150">
                    </div>
                    <p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Impedit, totam est illum ipsum quas ad
                        dignissimos magni veritatis natus voluptatem.</p>
                </div>
                <!-- Quick Links -->
                <div class="col-md-2">
                    <h5>Quick Links</h5>
                    <ul class="list-unstyled">
                        <li><a href="about.html">About</a></li>
                        <li><a href="offers.html">Offers & Discounts</a></li>
                        <li><a href="coupon.html">Get Coupon</a></li>
                        <li><a href="contact.html">Contact Us</a></li>
                    </ul>
                </div>
                <!-- New Products -->
                <div class="col-md-3">
                    <h5>New Products</h5>
                    <ul class="list-unstyled">
                        <li><a href="#">Woman Cloth</a></li>
                        <li><a href="#">Fashion Accessories</a></li>
                        <li><a href="#">Man Accessories</a></li>
                        <li><a href="#">Rubber made Toys</a></li>
                    </ul>
                </div>
                <!-- Support -->
                <div class="col-md-3">
                    <h5>Support</h5>
                    <ul class="list-unstyled">
                        <li><a href="faq.html">Frequently Asked Questions</a></li>
                        <li><a href="terms.html">Terms & Conditions</a></li>
                        <li><a href="privacy.html">Privacy Policy</a></li>
                        <li><a href="report.html">Report a Payment Issue</a></li>
                    </ul>
                </div>
            </div>
            <!-- Social Media -->
            <div class="row mt-3">
                <div class="col text-center">
                    <a href="#" class="text-dark mx-2"><i class="fab fa-facebook fa-2x"></i></a>
                    <a href="#" class="text-dark mx-2"><i class="fab fa-twitter fa-2x"></i></a>
                    <a href="#" class="text-dark mx-2"><i class="fab fa-instagram fa-2x"></i></a>
                    <a href="#" class="text-dark mx-2"><i class="fab fa-linkedin fa-2x"></i></a>
                </div>
            </div>
        </div>
    </footer>
    <button onclick="topFunction()" id="myBtn" title="Go to top"><i class="fa-solid fa-arrow-up"></i></button>
    <script src="assets/main.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        function updateCart() {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            let cartHtml = '';
            let total = 0;
            let shipmentCharges = 50; // Example fixed shipment charges
            let discountPercentage = 10; // 10% discount on every product
            let discount = 0; // Initialize total discount amount
            let savedMoney = 0; // Initialize total saved money

            if (cart.length === 0) {
                // Cart is empty
                $('#cart-items').html('<p>Your cart is empty.</p>');
                $('#cart-total').find('h4').text('Total: ₹0');
                $('#shipment-charges').text('Shipment Charges: ₹0');
                $('#discount').text(`Discount: ${discountPercentage}%`);
                $('#saved-money').text('You Saved: ₹0');
                $('#final-total').text('Final Total: ₹0');
                return; // Exit the function
            }

            cart.forEach(item => {
                let itemTotalPrice = item.price * item.quantity;
                let itemDiscount = itemTotalPrice * (discountPercentage / 100); // 10% discount on the total price of the item
                let itemSavedMoney = itemDiscount; // Money saved due to discount

                total += itemTotalPrice;
                discount += itemDiscount;
                savedMoney += itemSavedMoney;

                cartHtml += `
                    <div class="cart-item mb-3">
                        <div class="row">
                            <div class="col-md-4">
                                <img src="${item.image}" class="img-fluid" alt="${item.name}">
                            </div>
                            <div class="col-md-8">
                                <h5>${item.name}</h5>
                                <p>Price: ₹${item.price}</p>
                                <p>Discount: -₹${itemDiscount.toFixed(2)} (${discountPercentage}%)</p>
                                <div class="d-flex align-items-center">
                                    <button class="btn btn-secondary btn-sm" onclick="changeQuantity(${item.id}, -1)">-</button>
                                    <span class="mx-2">${item.quantity}</span>
                                    <button class="btn btn-secondary btn-sm" onclick="changeQuantity(${item.id}, 1)">+</button>
                                    <button class="btn btn-danger btn-sm ml-2" onclick="removeFromCart(${item.id})">Remove</button>
                                </div>
                                <p class="mt-2">Total: ₹${itemTotalPrice.toFixed(2)}</p>
                            </div>
                        </div>
                    </div>
                    <hr>
                `;
            });

            $('#cart-items').html(cartHtml);
            $('#cart-total').find('h4').text(`Total: ₹${total.toFixed(2)}`);
            $('#shipment-charges').text(`Shipment Charges: ₹${shipmentCharges.toFixed(2)}`);
            $('#discount').text(`Discount: ₹${discount.toFixed(2)} (${discountPercentage}%)`);
            $('#saved-money').text(`You Saved: ₹${savedMoney.toFixed(2)}`);
            $('#final-total').text(`Final Total: ₹${(total + shipmentCharges - discount).toFixed(2)}`);
        }

        function changeQuantity(productId, change) {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            let productIndex = cart.findIndex(item => item.id === productId);

            if (productIndex !== -1) {
                cart[productIndex].quantity += change;

                if (cart[productIndex].quantity <= 0) {
                    cart.splice(productIndex, 1);
                }

                localStorage.setItem('cart', JSON.stringify(cart));
                updateCart();
            }
        }

        function removeFromCart(productId) {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            cart = cart.filter(item => item.id !== productId);
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCart();
        }

        function proceedToCheckout() {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            if (cart.length === 0) {
                alert("Your cart is empty!");
                return;
            }
            localStorage.setItem('cart', JSON.stringify(cart));
            window.location.href = 'order.html';
        }

        document.addEventListener('DOMContentLoaded', updateCart);
    </script>
</body>

</html>
